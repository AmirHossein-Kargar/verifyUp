# ุฑุงูููุง ุญุงูุช ุชูุณุนู (Development Mode)

## ๐ง ูฺฺฏโูุง ูฺู ุญุงูุช ุชูุณุนู

ููุช `NODE_ENV=development` ุงุณุชุ ุจุฑูุงูู ุดุงูู ูฺฺฏโูุง ุฎุงุต ุจุฑุง ุชุณุช ุขุณุงูโุชุฑ ูโุดูุฏ.

### ๐ฑ ฺฉุฏ OTP ุฏุฑ ูพุงุณุฎ API

ุฏุฑ ุญุงูุช ุชูุณุนูุ ฺฉุฏูุง OTP ุฏุฑ ูพุงุณุฎ API ูุฑุงุฑ ูโฺฏุฑูุฏ ุชุง ุจุฏูู ูุงุฒ ุจู ุจุฑุฑุณ ูุงฺฏโูุง ุณุฑูุฑ ุจุชูุงูุฏ ุชุณุช ฺฉูุฏ.

#### ูพุงุณุฎ ุซุจุชโูุงู

```json
{
  "success": true,
  "message": "ุซุจุชโูุงู ุจุง ููููุช ุงูุฌุงู ุดุฏ. ูุทูุงู ุงูู ุง ุดูุงุฑู ููุจุงู ุฎูุฏ ุฑุง ุชุฃุฏ ฺฉูุฏ.",
  "data": {
    "userId": "507f1f77bcf86cd799439011",
    "email": "user@example.com",
    "phone": "09123456789",
    "requiresVerification": true,
    "otp": "123456", // โ๏ธ ููุท ุฏุฑ ุญุงูุช ุชูุณุนู!
    "emailToken": "abc123..." // โ๏ธ ููุท ุฏุฑ ุญุงูุช ุชูุณุนู!
  }
}
```

#### ูพุงุณุฎ ุงุฑุณุงู ูุฌุฏุฏ OTP

```json
{
  "success": true,
  "message": "ฺฉุฏ ุชุฃุฏ ูุฌุฏุฏุงู ุงุฑุณุงู ุดุฏ",
  "otp": "654321" // โ๏ธ ููุท ุฏุฑ ุญุงูุช ุชูุณุนู!
}
```

### ๐ง ุชูฺฉู ุชุงุฏ ุงูู

ุชูฺฉูโูุง ุชุงุฏ ุงูู ูุฒ ุฏุฑ console ูุงฺฏ ูโุดููุฏ:

```
๐ง Email verification for user@example.com:
   URL: http://localhost:3000/verify-email?token=abc123...
```

### ๐ฑ ูุงฺฏ ูพุงูฺฉ

ฺฉุฏูุง ูพุงูฺฉ ุจุง ูุฑูุช ูุงุถุญ ุฏุฑ console ููุงุด ุฏุงุฏู ูโุดููุฏ:

```
============================================================
๐ฑ OTP CODE FOR 09123456789: 123456
============================================================
```

### โ๏ธ ูุดุฏุงุฑ ุงููุช

**ููู:** ุงู ูฺฺฏโูุง ููุท ููุช ูุนุงู ูุณุชูุฏ ฺฉู `NODE_ENV=development` ุจุงุดุฏ.

ุฏุฑ ูุญุท ูุงูุน (`NODE_ENV=production`):

- โ ฺฉุฏูุง OTP ุฏุฑ ูพุงุณุฎ ูุฑุงุฑ ููโฺฏุฑูุฏ
- โ ุชูฺฉูโูุง ุฏุฑ console ูุงฺฏ ููโุดููุฏ
- โ ููุท ุงุฑุณุงู ูุงูุน SMS/Email ุงูุฌุงู ูโุดูุฏ

## ๐งช ูุฑุขูุฏ ุชุณุช

### 1. ุซุจุชโูุงู ฺฉุงุฑุจุฑ ุฌุฏุฏ

**ุฏุฑุฎูุงุณุช:**

```bash
POST http://localhost:4000/api/auth/register
Content-Type: application/json

{
  "name": "ฺฉุงุฑุจุฑ ุชุณุช",
  "email": "test@example.com",
  "phone": "09123456789",
  "password": "password123"
}
```

**ูพุงุณุฎ (ุญุงูุช ุชูุณุนู):**

```json
{
  "success": true,
  "message": "ุซุจุชโูุงู ุจุง ููููุช ุงูุฌุงู ุดุฏ...",
  "data": {
    "userId": "...",
    "email": "test@example.com",
    "phone": "09123456789",
    "requiresVerification": true,
    "otp": "123456", // ๐ ุงุฒ ุงู ฺฉุฏ ุงุณุชูุงุฏู ฺฉูุฏ!
    "emailToken": "..."
  }
}
```

### 2. ุชุงุฏ ุดูุงุฑู ุจุง OTP

**ุฏุฑุฎูุงุณุช:**

```bash
POST http://localhost:4000/api/auth/verify-otp
Content-Type: application/json

{
  "phone": "09123456789",
  "otp": "123456"  // ๐ ุงุฒ ูพุงุณุฎ ุซุจุชโูุงู
}
```

### 3. ุงุฑุณุงู ูุฌุฏุฏ OTP (ุฏุฑ ุตูุฑุช ูุงุฒ)

**ุฏุฑุฎูุงุณุช:**

```bash
POST http://localhost:4000/api/auth/resend-otp
Content-Type: application/json

{
  "phone": "09123456789"
}
```

**ูพุงุณุฎ (ุญุงูุช ุชูุณุนู):**

```json
{
  "success": true,
  "message": "ฺฉุฏ ุชุฃุฏ ูุฌุฏุฏุงู ุงุฑุณุงู ุดุฏ",
  "otp": "654321" // ๐ ฺฉุฏ ุฌุฏุฏ!
}
```

## ๐ฏ ฺฉูพุงุฑฺูโุณุงุฒ ุจุง ูุฑุงูุชโุงูุฏ

### ููุงุด OTP ุฏุฑ ุญุงูุช ุชูุณุนู

```javascript
// ุฏุฑ ฺฉุฏ ูุฑุงูุชโุงูุฏ
const handleRegister = async (data) => {
  try {
    const response = await api.register(data);

    // ุฏุฑ ุญุงูุช ุชูุณุนูุ ฺฉุฏ ุฑุง ุจู ฺฉุงุฑุจุฑ ูุดุงู ุฏูุฏ
    if (response.data.otp) {
      toast.success(`ฺฉุฏ ุชุงุฏ: ${response.data.otp}`);
      // ุง ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุฏุฑ input ูุฑุงุฑ ุฏูุฏ
      setOtpValue(response.data.otp);
    }

    // ุงูุชูุงู ุจู ุตูุญู ุชุงุฏ
    router.push("/verify-otp");
  } catch (error) {
    toast.error(error.message);
  }
};
```

### ูพุฑ ฺฉุฑุฏู ุฎูุฏฺฉุงุฑ OTP

```javascript
// ูพุฑ ฺฉุฑุฏู ุฎูุฏฺฉุงุฑ OTP ุฏุฑ ุญุงูุช ุชูุณุนู
useEffect(() => {
  if (process.env.NODE_ENV === "development" && registrationData?.otp) {
    setOtpInput(registrationData.otp);
  }
}, [registrationData]);
```

## ๐ ุชุบุฑ ูุญุท

### ุชูุณุนู (.env)

```env
NODE_ENV=development
SMS_ENVIRONMENT=sandbox
```

### ูุงูุน (.env)

```env
NODE_ENV=production
SMS_ENVIRONMENT=production
```

## ๐ ููุงุณู

| ูฺฺฏ        | ุชูุณุนู      | ูุงูุน    |
| ------------ | ---------- | -------- |
| OTP ุฏุฑ ูพุงุณุฎ  | โ ุจูู     | โ ุฎุฑ   |
| ุชูฺฉู ุฏุฑ ูพุงุณุฎ | โ ุจูู     | โ ุฎุฑ   |
| ูุงฺฏ Console  | โ ฺฉุงูู    | โ๏ธ ูุญุฏูุฏ |
| ุงุฑุณุงู SMS    | ๐ฑ Sandbox | ๐ฑ ูุงูุน |
| ุงุฑุณุงู Email  | ๐ง ูุงฺฏ     | ๐ง ูุงูุน |

## ๐ก๏ธ ูฺฉุงุช ุงููุช

1. **ูุฑฺฏุฒ ุจุง `NODE_ENV=development` ุฏูพูู ูฺฉูุฏ**
2. **ููุดู ุฏุฑ ูุญุท ูุงูุน ุงุฒ `NODE_ENV=production` ุงุณุชูุงุฏู ฺฉูุฏ**
3. **ฺฉุฏูุง OTP ูุฑฺฏุฒ ูุจุงุฏ ุฏุฑ ูพุงุณุฎโูุง ูุญุท ูุงูุน ุจุงุดูุฏ**
4. **ุชูฺฉูโูุง ูุฑฺฏุฒ ูุจุงุฏ ุฏุฑ ูุญุท ูุงูุน ูุงฺฏ ุดููุฏ**

## ๐งช ฺฺฉโูุณุช ุชุณุช

ูุจู ุงุฒ ุฏูพูู ุฏุฑ ูุญุท ูุงูุน:

- [ ] `NODE_ENV=production` ุชูุธู ุดุฏู
- [ ] `SMS_ENVIRONMENT=production` ุชูุธู ุดุฏู
- [ ] OTP ุฏุฑ ูพุงุณุฎ API ูุณุช
- [ ] ุชูฺฉูโูุง ูุงฺฏ ููโุดููุฏ
- [ ] ุงุฑุณุงู ูุงูุน SMS ุชุณุช ุดุฏู
- [ ] ุงุฑุณุงู ูุงูุน Email ุชุณุช ุดุฏู
- [ ] ูุฏุฑุช ุฎุทุง ุจุฑุฑุณ ุดุฏู
- [ ] ูุงฺฏโูุง ุงููุช ุจุฑุฑุณ ุดุฏู

## ๐ก ูฺฉุงุช ฺฉุงุฑุจุฑุฏ

### ููุงุด Toast ุจุง ฺฉุฏ OTP

ุฏุฑ ูุฑุงูุชโุงูุฏ ูโุชูุงูุฏ ฺฉุฏ ุฑุง ุจู ุตูุฑุช Toast ููุงุด ุฏูุฏ:

```javascript
// ุฏุฑ ุตูุญู ุซุจุชโูุงู
const handleRegister = async (formData) => {
  try {
    const response = await api.register(formData);

    // ููุงุด ฺฉุฏ ุฏุฑ ุญุงูุช ุชูุณุนู
    if (response.data.otp) {
      toast.info(
        `ฺฉุฏ ุชุงุฏ ุดูุง: ${response.data.otp}`,
        { duration: 10000 }, // 10 ุซุงูู
      );
    }

    // ุฐุฎุฑู ุจุฑุง ุงุณุชูุงุฏู ุจุนุฏ
    localStorage.setItem("dev_otp", response.data.otp);

    navigate("/verify-otp");
  } catch (error) {
    toast.error(error.message);
  }
};
```

### ุฏฺฉูู ฺฉูพ ฺฉุฏ

```javascript
// ุงุถุงูู ฺฉุฑุฏู ุฏฺฉูู ฺฉูพ ุฏุฑ ุญุงูุช ุชูุณุนู
{
  process.env.NODE_ENV === "development" && otpCode && (
    <button
      onClick={() => {
        navigator.clipboard.writeText(otpCode);
        toast.success("ฺฉุฏ ฺฉูพ ุดุฏ!");
      }}
      className="text-sm text-blue-600"
    >
      ๐ ฺฉูพ ฺฉุฏ: {otpCode}
    </button>
  );
}
```

### ูพุฑ ฺฉุฑุฏู ุฎูุฏฺฉุงุฑ ูุฑู

```javascript
// ุฏุฑ ุตูุญู ุชุงุฏ OTP
useEffect(() => {
  // ุฏุฑ ุญุงูุช ุชูุณุนูุ ฺฉุฏ ุฑุง ุฎูุฏฺฉุงุฑ ูพุฑ ฺฉู
  if (process.env.NODE_ENV === "development") {
    const devOtp = localStorage.getItem("dev_otp");
    if (devOtp) {
      setOtpInput(devOtp);
      // ูพุงฺฉ ฺฉุฑุฏู ุจุนุฏ ุงุฒ ุงุณุชูุงุฏู
      localStorage.removeItem("dev_otp");
    }
  }
}, []);
```

## ๐ ุฏุจุงฺฏ ู ุนุจโุงุจ

### ุจุฑุฑุณ ูุญุท

```javascript
// ุฏุฑ console ูุฑูุฑฺฏุฑ
console.log("Environment:", process.env.NODE_ENV);
console.log("API URL:", process.env.NEXT_PUBLIC_API_URL);
```

### ุจุฑุฑุณ ูพุงุณุฎ API

```javascript
// ุฏุฑ DevTools โ Network
// ุจุฑุฑุณ ฺฉูุฏ ฺฉู ุขุง OTP ุฏุฑ response ูุณุช ุง ูู
```

### ูุงฺฏโูุง ุณุฑูุฑ

```bash
# ุฏุฑ ุชุฑููุงู ุณุฑูุฑ
# ุจุงุฏ ุงู ูพุงู ุฑุง ุจุจูุฏ:
============================================================
๐ฑ OTP CODE FOR 09123456789: 123456
============================================================
```

## ๐ ูุณุชูุฏุงุช ูุฑุชุจุท

- [ุฑุงูููุง SMS](./ุฑุงูููุง-SMS.md)
- [ูุณุชูุฏุงุช API](./API_DOCUMENTATION.md)
- [ุฑุงูููุง ุงููุช](./SECURITY.md)

---

**ุงุฏุขูุฑ:** ูฺฺฏโูุง ุญุงูุช ุชูุณุนู ุจุฑุง ุฑุงุญุช ุฏุฑ ุชุณุช ูุณุชูุฏ. ููุดู ูุทูุฆู ุดูุฏ ฺฉู ุฏุฑ ูุญุท ูุงูุน ุบุฑูุนุงู ูุณุชูุฏ!
